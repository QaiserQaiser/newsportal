{% extends 'base1.html' %}
{% block content %}
{% load static %}
<div class="trending-area fix pt-30 gray-bg">
        <div class="container">
            <div class="trending-main">
                <div class="row">
                    <div class="col-lg-8">
                        <!-- Trending Top -->
                        <div class="slider-active">
                            <!-- Single -->
                            {% for i in postnews  %}
                            <div class="single-slider">
                                <div class="trending-top mb-30">
                                    <div class="trend-top-img">
                                        <img src="{{i.postimage.url}}" alt="">
                                        <div class="trend-top-cap">
                                            <span class="bgr" data-animation="fadeInUp" data-delay=".2s" data-duration="1000ms">{{i.cat_id.catname}}</span>
                                            <h2><a href="{% url 'view_single_news' i.id %}" data-animation="fadeInUp" data-delay=".4s" data-duration="1000ms">{{i.posttitle}}</a></h2>
                                            <p data-animation="fadeInUp" data-delay=".6s" data-duration="1000ms">{{i.posted_date}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>{% endfor %}
                            <!-- Single -->
                            
                          
                        </div>
                    </div>
                    <!-- Right content -->
                    <div class="col-lg-4">
                            <!-- Trending Top -->
                        <div class="row">
                            {% for i in postnews  %}
                            <div class="col-lg-12 col-md-6 col-sm-6">
                                <div class="trending-top mb-30">
                                    <div class="trend-top-img">
                                        <img src="{{i.postimage.url}}" alt="">
                                        <div class="trend-top-cap trend-top-cap2">
                                            <span class="bgb">{{i.cat_id.catname}}</span>
                                            <h2><a href="{% url 'view_single_news' i.id %}">{{i.posttitle}}</a></h2>
                                            <p>{{i.posted_date}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>{% endfor %}
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Trending Area End -->
    <!-- Whats New Start -->
    <section class="whats-news-area pt-50 pb-20 gray-bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                <div class="whats-news-wrapper">
                    <!-- Heading & Nav Button -->
                    <div class="row justify-content-between align-items-end mb-15">
                        <div class="col-xl-4">
                            <div class="section-tittle mb-30">
                                <h3>News</h3>
                            </div>
                        </div>
                        <div class="col-xl-8 col-md-9">
                            <div class="properties__button">
                                <!--Nav Button  -->                                            
                                <nav>                                                 
                                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                        {% for i in category  %}
                                        <a class="nav-item nav-link active" href="{% url 'category_detail' id=i.id %}" role="tab" aria-controls="nav-home" aria-selected="true">{{i.catname}}</a>{% endfor %}
                                        
                                        
                                    </div>
                                </nav>
                                <!--End Nav Button  -->
                            </div>
                        </div>
                    </div>
                    <!-- Tab content -->
                    <div class="row">
                        <div class="col-12">
                            <!-- Nav Card -->
                            <div class="tab-content" id="nav-tabContent">
                                <!-- card one -->
                                <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">       
                                    <div class="row">
                                        <!-- Left Details Caption -->
                                       
                                        <!-- Right single caption -->
                                        <div class="col-xl-8 col-lg-12">
                                            <div class="row">
                                                <!-- single -->
                                                {% for i in postnews1  %}
                                                <div class="col-xl-12 col-lg-6 col-md-6 col-sm-10">
                                                    <div class="whats-right-single mb-20">
                                                        <div class="most-recent-img" style="height: 250px; overflow: hidden;">
                                                            <img src="{{i.postimage.url}}" alt="" style="height: 100%; width: 100%; object-fit: cover;">
                                                        </div>
                                                        <div class="whats-right-cap">
                                                            <span class="colorb">{{i.cat_id.catname}}</span>
                                                            <h4><a href="{% url 'view_single_news' i.id %}">{{i.posttitle}}.</a></h4>
                                                            <p>{{i.posted_date}}</p> 
                                                        </div>
                                                    </div>
                                                </div>{% endfor %}
                                             
                                              
                                               
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Card two -->
                              
                                
                            </div>
                        <!-- End Nav Card -->
                        </div>
                    </div>
                </div>
                <!-- Banner -->
               
                </div>
                <div class="col-lg-4">
                    <!-- Flow Socail -->
                    
                    <!-- Most Recent Area -->
                    <div class="most-recent-area">
                        <!-- Section Tittle -->
                        <div class="small-tittle mb-20">
                            <h4>Most Recent</h4>
                        </div>
                        <!-- Details -->
                        {% for i in recentnews  %}
                        <div class="most-recent mb-40">
                            <div class="most-recent-img">
                                <img src="{{i.postimage.url}}" alt="">
                                <div class="most-recent-cap">
                                    <span class="bgbeg">{{i.cat_id.catname}}</span>
                                    <h4><a href="{% url 'view_single_news' i.id %}">{{i.posttitle}}.</a></h4>
                                    <p>{{i.posted_date}}</p>
                                </div>
                            </div>
                        </div>{% endfor %}
                        <!-- Single -->
                      
                     
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Whats New End -->
    <!--   Weekly2-News start -->
    <div class="weekly2-news-area pt-50 pb-30 gray-bg">
        <div class="container">
            <div class="weekly2-wrapper">
                <div class="row">
                    <!-- Banner -->
                 
                    <div class="col-lg-12">
                        <div class="slider-wrapper">
                            <!-- section Tittle -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="small-tittle mb-30">
                                        <h4>Most Popular</h4>
                                    </div>
                                </div>
                            </div>
                            <!-- Slider -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="weekly2-news-active d-flex">
                                        <!-- Single -->
                                        {% for i in recentnews  %}
                                        <div class="weekly2-single">
                                            <div class="weekly2-img">
                                                <img src="{{i.postimage.url}}" alt="">
                                            </div>
                                            <div class="weekly2-caption">
                                                <h4><a href="{% url 'view_single_news' i.id %}">{{i.posttitle}}</a></h4>
                                                <p>{{i.posted_date}}</p>
                                            </div>
                                        </div> {% endfor %}
                                        <!-- Single -->
                                      
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>           
    <!-- End Weekly-News -->
    <!-- banner-last Start -->
  
   <!-- World Map Section -->
<!-- <div class="world-map-section pt-80 pb-80">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-tittle text-center mb-50">
                    <h2>Global News Coverage</h2>
                    <p>Bringing you news from around the world</p>
                </div>
            </div>
            <div class="col-lg-12 d-flex justify-content-center">
                <div id="globe-container" style="width: 400px; height: 400px; border: 1px solid #eee; background: #f8f9fa;"></div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    try {
        const container = document.getElementById('globe-container');
        if (!container) {
            console.error('Globe container not found');
            return;
        }

        // Check WebGL support
        if (!Detector.webgl) {
            container.innerHTML = '<p>WebGL is not supported in your browser. Please try a modern browser.</p>';
            return;
        }

        const width = container.clientWidth;
        const height = container.clientHeight;

        // Scene setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ 
            antialias: true,
            alpha: true
        });
        
        renderer.setSize(width, height);
        container.innerHTML = '';
        container.appendChild(renderer.domElement);

        // Basic lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(1, 1, 1);
        scene.add(directionalLight);

        // Create Earth with fallback color
        const geometry = new THREE.SphereGeometry(2, 32, 32);
        const material = new THREE.MeshPhongMaterial({
            color: 0x3498db, // Blue color as fallback
            specular: 0x333333,
            shininess: 5
        });
        
        const earth = new THREE.Mesh(geometry, material);
        scene.add(earth);

        // Try to load texture
        const textureLoader = new THREE.TextureLoader();
        textureLoader.load(
            'https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg',
            function(texture) {
                earth.material.map = texture;
                earth.material.needsUpdate = true;
            },
            undefined,
            function(error) {
                console.error('Error loading texture:', error);
                // Keep the blue color if texture fails to load
            }
        );

        camera.position.z = 5;

        // Controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableZoom = false;
        controls.enablePan = false;
        controls.enableDamping = true;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 0.5;

        // Handle window resize
        window.addEventListener('resize', function() {
            const width = container.clientWidth;
            const height = container.clientHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        animate();

    } catch (error) {
        console.error('Error initializing globe:', error);
        if (container) {
            container.innerHTML = '<p>Error loading the globe. Please check console for details.</p>';
        }
    }
});
</script> -->
{% endblock %}